@*

*@
@using Fr.EQL.Ai109.Tontapatt.WebApplication.Models
@using Fr.EQL.Ai109.Tontapatt.Model
@model PointageJournalierDetailsViewModel
@{ ViewData["Title"] = "TONTAPATT - Pointage Journalier";
    DateTime dateDernierPointage = new();
}
<div class="infosOffre_main">
    <h1 class="infosOffre_h1">Pointage Journalier</h1>
    @*@Model.DemandeDeReservationDetails.*@
    <div class="infosOffre_div">
        <div class="infosOffre_infos">
            <p class="infosOffre_infosNomEleveur"><strong>Nom de l'éleveur : <a href="#">nom de l'eleveur</a></strong></p>

            @*tableau des pointages*@
            <table>
                <tr>
                    <td>
                        Date
                    </td>
                    <td>
                        Heure
                    </td>
                </tr>

                @foreach (PointageJournalier p in Model.ListPointagesJournalier)
                {

                    <tr>
                        <td>
                            @p.HeurePointage.ToString("yyyy-MM-dd")
                            @{dateDernierPointage = p.HeurePointage; }
                        </td>
                        <td>
                            @p.HeurePointage.TimeOfDay
                        </td>
                    </tr>
                }


            </table>
        </div>

        <div class="infosOffre_selection">
            <div class="infosOffre_date">
                <label>Heure Prevue :</label>
                <input asp-for="@Model.PointageJournalier.HeurePrevu" type="time" min="08:00" max="20:00" value="08:00" disabled />

                @*verification si eleveur a deja pointer*@
                @if (Model.DemandeDeReservationDetails.DateDebutDemande <= DateTime.Today && dateDernierPointage.ToString("yyyy-MM-dd") != DateTime.Today.ToString("yyyy-MM-dd"))
                {
                    <a class="btn-infos" asp-controller="Utilisateur" asp-action="PointageJournalier" asp-route-idDemandeDeReservation="@ViewBag.IdDemandeDeReservation" asp-route-idUtilisateur="@ViewBag.idUtilisateur">Pointer</a>
                }
                else
                {
                    <a class="btn-infos" asp-controller="Home" asp-action="Indexreturn" asp-route-idUtilisateur="@ViewBag.idUtilisateur">Home</a>
                }
            </div>
        </div>
    </div>
</div>